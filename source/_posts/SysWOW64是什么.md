title: SysWOW64是什么
date: 2014-11-28 10:51:04
tags: [Window, DLL]
---
在做Printing的时候把VS中项目打包后要把dll文件放到Win7的**SysWOW64**文件夹下，我在网上查了一些什么是**SysWOW64**文件夹：
>**WOW64** (Windows-on-Windows64-bit)是一个Windows操作系统的子系统,能够运行32-bit 应用程序,并且在所有的64-bit 版本的windows上都存在。

##转换库
---
WoW64子系统是一个轻量级的**compatibility layer**, 在所有版本的windows上都拥有同样的接口. 它的主要目的是用来创建**32-bit**环境, 为了让32位的应用程序可以不经过任何修改就运行在64-bit的系统上, 它提供了必须的接口.
技术上说, WOW64是由三个DLL实现的:

 - `Wow64.dll` 是Windows NT kernel的核心接口, 在32位和64位调用之间进行转换, 包括指针和调用栈的操控.
 - `Wow64win.dll` 为32位应用程序提供合适的入口指针.
 - `Wow64cpu.dll` 负责将处理器在32位和64位的模式之间转换.


##注册表和文件系统
---
WOW子系统也会处理运行64-bit应用程序的其他关键方面. 比如说, 在管理32位应用程序与windows注册表的交互时,  会给存储子系统提供接口(32位的注册表与64位的注册表不太一样.)
 
操作系统使`用%SystemRoot%\system32`目录来存储**64-bit**的库文件和可执行文件. 这样做是为了向后兼容, 因为很多旧系统的应用程序都是使用`hardcoded`的方式来获取这个路径的. 当执行32位应用程序的时候, **WOW64**会将对**DLL**的请求从**system32**重定向到`%SystemRoot%\SysWOW64`, 在SysWOW64目录中, 包含了旧系统的库和可执行文件.

